{
  "runnableVersion": "01.00.00",
  "name": "runnableHttpJsonPayload",
  "initialDelay": 0,
  "runnables": [
    {
      "timeout": 30000,
      "name": "HttpTitle",
      "subscriptions": [
        {
          "type": "http-server",
          "name": "HttpSubscriptionTitle",
          "endpoint": "/enqueuer",
          "port": 23075,
          "method": "POST",
          "response": {
            "status": 321,
            "payload": "responsePayload"
          },
          "onMessageReceived": "test['Payload.enqueuer is Virgs'] = JSON.parse(message).enqueuer === 'virgs';",
          "timeout": 10000
        }
      ],
      "startEvent": {
        "publisher": {
          "type": "http-client",
          "name": "HttpPublisherClientTitle",
          "url": "http://localhost:23075/enqueuer",
          "method": "POST",
          "prePublishing": "test['prePublishingTest'] = true",
          "onMessageReceived": "test['publisherOnMessageReceivedTest'] = JSON.parse(message).statusCode == 321; test['publisherOnMessageReceivedPayloadTest'] = JSON.parse(message).body == 'responsePayload'",
          "payload": {
            "enqueuer": "virgs"
          },
          "headers": {
            "content-type": "application/json"
          }
        }
      }
    }
  ]
}