-   name: server subscription
    publishers:
    -   type: custom
        module: protocols/publishers/amqp10.js
        payload:
            body: direct hello world
        connection:
            port: 23074
        options: queueWannaBe
        onMessageReceived:
            assertions:
            -   expectToBeDefined: id
            -   expectToBeDefined: tag
            -   expectToBeDefined: link
            -   expectToBeDefined: data
            -   expectToBeDefined: format
            -   expectToBeDefined: sent
            -   expectToBeDefined: settled
            -   expectToBeDefined: remote_settled
    subscriptions:
    -   type: custom
        module: protocols/subscriptions/amqp10.js
        server: true
        connection:
            port: 23074
        options: queueWannaBe
        onMessageReceived:
            assertions:
            -   expect: body
                toBeEqualTo: subscription.parent.publishers[0].payload.body
-   name: broker subscription
    publishers:
    -   type: custom
        module: protocols/publishers/amqp10.js
        options:
            target: /queue/Q
        payload:
            body: let your imagination fly
        connection:
            host: localhost
            port: 5672
        onMessageReceived:
            assertions:
            -   expectToBeDefined: id
            -   expectToBeDefined: tag
            -   expectToBeDefined: link
            -   expectToBeDefined: data
            -   expectToBeDefined: format
            -   expectToBeDefined: sent
            -   expectToBeDefined: settled
            -   expectToBeDefined: remote_settled
    subscriptions:
    -   type: custom
        module: protocols/subscriptions/amqp10.js
        connection:
            host: localhost
            port: 5672
        options:
            source: /queue/Q
        onMessageReceived:
            assertions:
            -   expect: body
                toBeEqualTo: subscription.parent.publishers[0].payload.body
            -   expectToBeDefined: durable
            -   expectToBeDefined: first_acquirer
