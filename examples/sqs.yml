name: sqs test description
id: sqs
runnables:
- name: requisition description
  timeout: 5000
  startEvent:
    publisher:
      name: publisher description
      type: sqs
      payload: enqueuer
      awsConfiguration: <<awsConfiguration>>
      messageParams:
        QueueUrl: http://localhost:9324/queue/enqueuerQueue
      onMessageReceived:
        assertions:
        - name: Request Id is all 000000
          expected: ResponseMetadata.RequestId
          toBeEqualTo: `00000000-0000-0000-0000-000000000000`
        - name: ResponseMetadata
          toBeDefined: ResponseMetadata
        - name: MD5
          toBeDefined: MD5OfMessageBody
        - name: MD5OfMessageAttributes
          toBeDefined: MD5OfMessageAttributes
        - name: MessageId
          toBeDefined: MessageId
  subscriptions:
  - name: subscription description
    type: sqs
    awsConfiguration: <<awsConfiguration>>
    messageParams:
      QueueUrl: http://localhost:9324/queue/enqueuerQueue
    timeout: 3000
    onMessageReceived:
      assertions:
      - name: Body
        expected: Body
        toContain: `enq`
      - name: MessageId
        toBeDefined: MessageId
      - name: ReceiptHandle
        toBeDefined: ReceiptHandle
      - name: MD5OfBody
        toBeDefined: MD5OfBody