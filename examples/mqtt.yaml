runnableVersion: 01.00.00
name: runnableMqtt
id: mqtt
initialDelay: 0
runnables:
- timeout: 8000
  name: RequisitionMqtt
  startEvent:
    publisher:
      type: mqtt
      name: MqttPub
      brokerAddress: mqtt://iot.eclipse.org
      payload: enqueuer
      topic: enqueuer/integration/public/test
      options:
        clientId: enqueuerPublishOptionsExampleIdDifferent2313
  subscriptions:
  - type: mqtt
    brokerAddress: mqtt://iot.eclipse.org
    name: MqttSub
    topic: enqueuer/integration/public/test
    onMessageReceived: >-
      let enqueuer = 'enqueuer';
      const parsedMessage = JSON.parse(message);
      const payload = Buffer.from(parsedMessage.payload);
      tester.isEqualTo('Payload', payload, enqueuer);
      tester.isEqualTo('Topic', parsedMessage.topic, 'enqueuer/integration/public/test');
    options:
      clientId: enqueuerSubscriptionOptionsExampleId9900223
    timeout: 5000
