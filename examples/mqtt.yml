name: runnableMqtt
id: mqtt
runnables:
- timeout: 8000
  name: RequisitionMqtt
  startEvent:
    publisher:
      type: mqtt
      name: MqttPub
      brokerAddress: mqtt://localhost
      payload: enqueuer
      topic: enqueuer/integration/public/test
      options:
        clientId: enqueuerPublishOptionsExampleIdDifferent2313
  subscriptions:
  - type: mqtt
    brokerAddress: mqtt://localhost
    name: MqttSub
    topic: '#'
    onMessageReceived: |-
      let enqueuer = 'enqueuer';
      const payload = Buffer.from(message.payload);
      tester.isEqualTo('Payload', payload, enqueuer);
      tester.isEqualTo('Topic', message.topic, 'enqueuer/integration/public/test');
    timeout: 5000
