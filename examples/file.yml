name: file test description
id: file
runnables:
- name: requisition description
  timeout: 3000
  startEvent:
    publisher:
      type: file
      name: publisher description
      payload: filePublisher
      filenamePrefix: temp/fileTest
      filenameExtension: file
      onInit:
        script: publisher.payload=new Date().getTime();
  subscriptions:
  - name: subscription description
    type: file-name-watcher
    timeout: 1000
    fileNamePattern: temp/fileTest*file
    onMessageReceived:
      script: now = new Date().getTime();
      assertions:
      - name: Some time has passed
        expected: now
        isGreaterThanOrEqualTo: message.content
      - name: Filename
        expected: name
        contains: `temp/`
      - name: Content
        isDefined: content
      - name: Created
        isDefined: created
      - name: Modified
        isDefined: modified
      - name: Size
        expected: size
        isGreaterThan: 0