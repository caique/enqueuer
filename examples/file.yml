name: file test description
id: file
runnables:
- name: requisition description
  timeout: 3000
  startEvent:
    publisher:
      type: file
      name: publisher description
      payload: filePublisher
      filenamePrefix: temp/fileTest
      filenameExtension: file
      onInit:
        script: publisher.payload=new Date().getTime();
  subscriptions:
  - name: subscription description
    type: file-system-watcher
    timeout: 3000
    fileNamePattern: temp/fileTest*
    onMessageReceived:
      script: now = new Date().getTime();
      assertions:
      - name: Some time has passed
        expected: now
        toBeGreaterThanOrEqualTo: message.content
      - name: Filename
        expected: name
        toContain: `temp/`
      - name: Content
        toBeDefined: content
      - name: Created
        toBeDefined: created
      - name: Modified
        toBeDefined: modified
      - name: Size
        expected: size
        toBeGreaterThan: 0