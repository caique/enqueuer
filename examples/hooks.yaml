runnableVersion: 01.00.00
name: hooks example
id: hook
runnables:
- timeout: 100
  onInit: >-
    tester.isDefined('Requisition exists', requisition);
    tester.isEqualTo('Requisition name', requisition.name, 'example');
  name: example
  startEvent:
    publisher:
      type: http-client
      name: publishing
      url: http://localhost:23078/hooks
      method: GET
      onInit: >-
        tester.isDefined('Publisher exists onInit', publisher);
        tester.isEqualTo('Publisher name', publisher.name, 'publishing');
        publisher.name = 'changed';
      onMessageReceived: >-
        tester.isDefined('Publisher exists onMessageReceived', publisher);
        tester.isEqualTo('Publisher name changed', publisher.name, 'changed');
  subscriptions:
    - type: http-server
      name: subscription
      endpoint: /hooks
      port: 23078
      method: GET
      response:
        status: 200
      onInit: >-
        tester.isDefined('Subscription exists onInit', subscription);
        tester.isEqualTo('Subscription name', subscription.name, 'subscription');
        subscription.name = 'changed';
      onMessageReceived: >-
        tester.isDefined('Subscription exists onMessageReceived', subscription);
        tester.isEqualTo('Subscription name changed', subscription.name, 'changed');
